window.pannellum=function(t,o){'use strict';function e(e,n){function a(o){t.removeEventListener('deviceorientation',a),o&&null!==o.alpha&&null!==o.beta&&null!==o.gamma?(nt.container.appendChild(nt.orientation),at=!0,it&&ae()):at=!1}function i(){var e=o.createElement('div');if(e.innerHTML='<!--[if lte IE 9]><i></i><![endif]-->',1==e.getElementsByTagName('i').length)return void d();ye=de.hfov,fe=de.pitch;var n,h;if('cubemap'==de.type){for(me=[],n=0;6>n;n++)me.push(new Image),me[n].crossOrigin=de.crossOrigin;tt.load.lbox.style.display='block',tt.load.lbar.style.display='none'}else if('multires'==de.type){var a=JSON.parse(JSON.stringify(de.multiRes));de.basePath&&de.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(de.multiRes.basePath)?a.basePath=de.basePath+de.multiRes.basePath:de.multiRes.basePath?a.basePath=de.multiRes.basePath:de.basePath&&(a.basePath=de.basePath),me=a}else if(!0===de.dynamic)me=de.panorama;else{if(void 0===de.panorama)return void d(de.strings.noPanoramaError);me=new Image}if('cubemap'==de.type){var c=6,m=function(){c--,0===c&&l()},u=function(t){var e=o.createElement('a');e.href=t.target.src,e.textContent=e.href,d(de.strings.fileAccessError.replace('%s',e.outerHTML))};for(n=0;n<me.length;n++)h=de.cubeMap[n],'null'==h?(console.log('Will use background instead of missing cubemap face '+n),m()):(de.basePath&&!s(h)&&(h=de.basePath+h),me[n].onload=m,me[n].onerror=u,me[n].src=se(h))}else if('multires'==de.type)l();else if(h='',de.basePath&&(h=de.basePath),!0!==de.dynamic){h=s(de.panorama)?de.panorama:h+de.panorama,me.onload=function(){t.URL.revokeObjectURL(this.src),l()};var v=new XMLHttpRequest;v.onloadend=function(){if(200!=v.status){var e=o.createElement('a');e.href=h,e.textContent=e.href,d(de.strings.fileAccessError.replace('%s',e.outerHTML))}var t=this.response;r(t),tt.load.msg.innerHTML=''},v.onprogress=function(t){if(t.lengthComputable){var e=100*(t.loaded/t.total);tt.load.lbarFill.style.width=e+'%';var o,n,a;1e6<t.total?(o='MB',n=(t.loaded/1e6).toFixed(2),a=(t.total/1e6).toFixed(2)):1e3<t.total?(o='kB',n=(t.loaded/1e3).toFixed(1),a=(t.total/1e3).toFixed(1)):(o='B',n=t.loaded,a=t.total),tt.load.msg.innerHTML=n+' / '+a+' '+o}else tt.load.lbox.style.display='block',tt.load.lbar.style.display='none'};try{v.open('GET',h,!0)}catch(t){d(de.strings.malformedURLError)}v.responseType='blob',v.setRequestHeader('Accept','image/*,*/*;q=0.9'),v.withCredentials='use-credentials'===de.crossOrigin,v.send()}de.draggable&&Je.classList.add('pnlm-grab'),Je.classList.remove('pnlm-grabbing')}function s(e){return /^(?:[a-z]+:)?\/\//i.test(e)||'/'==e[0]||'blob:'==e.slice(0,5)}function l(){ce||(ce=new libpannellum.renderer($e)),Ye||(Ye=!0,Qe.addEventListener('mousedown',m,!1),o.addEventListener('mousemove',y,!1),o.addEventListener('mouseup',f,!1),de.mouseZoom&&(Je.addEventListener('mousewheel',L,!1),Je.addEventListener('DOMMouseScroll',L,!1)),de.doubleClickZoom&&Qe.addEventListener('dblclick',u,!1),Je.addEventListener('mozfullscreenchange',_,!1),Je.addEventListener('webkitfullscreenchange',_,!1),Je.addEventListener('msfullscreenchange',_,!1),Je.addEventListener('fullscreenchange',_,!1),t.addEventListener('resize',H,!1),t.addEventListener('orientationchange',H,!1),!de.disableKeyboardCtrl&&(e.addEventListener('keydown',k,!1),e.addEventListener('keyup',O,!1),e.addEventListener('blur',C,!1)),o.addEventListener('mouseleave',f,!1),''===o.documentElement.style.pointerAction&&''===o.documentElement.style.touchAction?(Qe.addEventListener('pointerdown',x,!1),Qe.addEventListener('pointermove',E,!1),Qe.addEventListener('pointerup',P,!1),Qe.addEventListener('pointerleave',P,!1)):(Qe.addEventListener('touchstart',g,!1),Qe.addEventListener('touchmove',w,!1),Qe.addEventListener('touchend',b,!1)),t.navigator.pointerEnabled&&(e.style.touchAction='none')),Y(),Q(de.hfov),setTimeout(function(){},500)}function r(e){var o=new FileReader;o.addEventListener('loadend',function(){var n=o.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var a=n.indexOf('\xFF\xC2');(0>a||65536<a)&&d(de.strings.iOS8WebGLError)}var i=n.indexOf('<x:xmpmeta');if(-1<i&&!0!==de.ignoreGPanoXMP){var s=n.substring(i,n.indexOf('</x:xmpmeta>')+12),l=function(e){var t;return 0<=s.indexOf(e+'="')?(t=s.substring(s.indexOf(e+'="')+e.length+2),t=t.substring(0,t.indexOf('"'))):0<=s.indexOf(e+'>')&&(t=s.substring(s.indexOf(e+'>')+e.length+1),t=t.substring(0,t.indexOf('<'))),void 0===t?null:+t},r={fullWidth:l('GPano:FullPanoWidthPixels'),croppedWidth:l('GPano:CroppedAreaImageWidthPixels'),fullHeight:l('GPano:FullPanoHeightPixels'),croppedHeight:l('GPano:CroppedAreaImageHeightPixels'),topPixels:l('GPano:CroppedAreaTopPixels'),heading:l('GPano:PoseHeadingDegrees'),horizonPitch:l('GPano:PosePitchDegrees'),horizonRoll:l('GPano:PoseRollDegrees')};null!==r.fullWidth&&null!==r.croppedWidth&&null!==r.fullHeight&&null!==r.croppedHeight&&null!==r.topPixels&&(0>Xe.indexOf('haov')&&(de.haov=360*(r.croppedWidth/r.fullWidth)),0>Xe.indexOf('vaov')&&(de.vaov=180*(r.croppedHeight/r.fullHeight)),0>Xe.indexOf('vOffset')&&(de.vOffset=-180*((r.topPixels+r.croppedHeight/2)/r.fullHeight-.5)),null!==r.heading&&0>Xe.indexOf('northOffset')&&(de.northOffset=r.heading,!1!==de.compass&&(de.compass=!0)),null!==r.horizonPitch&&null!==r.horizonRoll&&(0>Xe.indexOf('horizonPitch')&&(de.horizonPitch=r.horizonPitch),0>Xe.indexOf('horizonRoll')&&(de.horizonRoll=r.horizonRoll)))}me.src=t.URL.createObjectURL(e)}),o.readAsBinaryString===void 0?o.readAsText(e):o.readAsBinaryString(e)}function d(e){e===void 0&&(e=de.strings.genericWebGLError),tt.errorMsg.innerHTML='<p>'+e+'</p>',nt.load.style.display='none',tt.load.box.style.display='none',tt.errorMsg.style.display='table',Ae=!0,$e.style.display='none',re('error',e)}function c(){Ae&&(tt.load.box.style.display='none',tt.errorMsg.style.display='none',Ae=!1,re('errorcleared'))}function p(e){var t=h(e);et.style.left=t.x+'px',et.style.top=t.y+'px',clearTimeout(p.t1),clearTimeout(p.t2),et.style.display='block',et.style.opacity=1,p.t1=setTimeout(function(){et.style.opacity=0},2e3),p.t2=setTimeout(function(){et.style.display='none'},2500),e.preventDefault()}function h(t){var o=e.getBoundingClientRect(),n={};return n.x=t.clientX-o.left,n.y=t.clientY-o.top,n}function m(t){if(t.preventDefault(),e.focus(),he&&de.draggable){var o=h(t);if(de.hotSpotDebug){var n=v(t);console.log('Pitch: '+n[0]+', Yaw: '+n[1]+', Center Pitch: '+de.pitch+', Center Yaw: '+de.yaw+', HFOV: '+de.hfov)}ee(),ne(),de.roll=0,We.hfov=0,Re=!0,Se=Date.now(),He=o.x,Te=o.y,Ie=de.yaw,Ne=de.pitch,Je.classList.add('pnlm-grabbing'),Je.classList.remove('pnlm-grab'),re('mousedown',t),T()}}function u(e){if(de.minHfov===de.hfov)ze.setHfov(ye,1e3);else{var t=v(e);ze.lookAt(t[0],t[1],de.minHfov,1e3)}}function v(e){var t=h(e),o=ce.getCanvas(),n=o.clientWidth,i=o.clientHeight,l=2*(t.x/n)-1,r=(1-2*(t.y/i))*i/n,d=1/Ce(de.hfov*Oe/360),p=ke(de.pitch*Oe/180),s=Le(de.pitch*Oe/180),c=d*s-r*p,a=Pe(l*l+c*c),m=180*Ee((r*s+d*p)/a)/Oe,u=180*xe(l/a,c/a)/Oe+de.yaw;return-180>u&&(u+=360),180<u&&(u-=360),[m,u]}function y(e){if(Re&&he){Se=Date.now();var t=ce.getCanvas(),o=t.clientWidth,n=t.clientHeight,a=h(e),i=180*(Ee(2*(He/o)-1)-Ee(2*(a.x/o)-1))/Oe*de.hfov/90+Ie;We.yaw=.2*((i-de.yaw)%360),de.yaw=i;var s=180*(2*Ee(Ce(de.hfov/360*Oe)*n/o))/Oe,l=180*(Ee(2*(a.y/n)-1)-Ee(2*(Te/n)-1))/Oe*s/90+Ne;We.pitch=.2*(l-de.pitch),de.pitch=l}}function f(e){Re&&(Re=!1,15<Date.now()-Se&&(We.pitch=We.yaw=0),Je.classList.add('pnlm-grab'),Je.classList.remove('pnlm-grabbing'),Se=Date.now(),re('mouseup',e))}function g(e){if(he&&de.draggable){ee(),ne(),de.roll=0,We.hfov=0;var t=h(e.targetTouches[0]);if(He=t.x,Te=t.y,2==e.targetTouches.length){var o=h(e.targetTouches[1]);He+=.5*(o.x-t.x),Te+=.5*(o.y-t.y),Fe=Pe((t.x-o.x)*(t.x-o.x)+(t.y-o.y)*(t.y-o.y))}Re=!0,Se=Date.now(),Ie=de.yaw,Ne=de.pitch,re('touchstart',e),T()}}function w(e){if(de.draggable&&(e.preventDefault(),he&&(Se=Date.now()),Re&&he)){var t=h(e.targetTouches[0]),o=t.x,n=t.y;if(2==e.targetTouches.length&&-1!=Fe){var a=h(e.targetTouches[1]);o+=.5*(a.x-t.x),n+=.5*(a.y-t.y);var i=Pe((t.x-a.x)*(t.x-a.x)+(t.y-a.y)*(t.y-a.y));Q(de.hfov+.1*(Fe-i)),Fe=i}var s=de.hfov/360*de.touchPanSpeedCoeffFactor,l=(He-o)*s+Ie;We.yaw=.2*((l-de.yaw)%360),de.yaw=l;var r=(n-Te)*s+Ne;We.pitch=.2*(r-de.pitch),de.pitch=r}}function b(){Re=!1,150<Date.now()-Se&&(We.pitch=We.yaw=0),Fe=-1,Se=Date.now(),re('touchend',event)}function x(e){'touch'==e.pointerType&&(lt.push(e.pointerId),rt.push({clientX:e.clientX,clientY:e.clientY}),e.targetTouches=rt,g(e),e.preventDefault())}function E(e){if('touch'==e.pointerType)for(var t=0;t<lt.length;t++)if(e.pointerId==lt[t])return rt[t].clientX=e.clientX,rt[t].clientY=e.clientY,e.targetTouches=rt,w(e),void e.preventDefault()}function P(e){if('touch'==e.pointerType){for(var t=!1,o=0;o<lt.length;o++)e.pointerId==lt[o]&&(lt[o]=void 0),lt[o]&&(t=!0);t||(lt=[],rt=[],b()),e.preventDefault()}}function L(e){he&&('fullscreenonly'!=de.mouseZoom||Me)&&(e.preventDefault(),ee(),Se=Date.now(),e.wheelDeltaY?(Q(de.hfov-.05*e.wheelDeltaY),We.hfov=0>e.wheelDelta?1:-1):e.wheelDelta?(Q(de.hfov-.05*e.wheelDelta),We.hfov=0>e.wheelDelta?1:-1):e.detail&&(Q(de.hfov+1.5*e.detail),We.hfov=0<e.detail?1:-1),T())}function k(e){ee(),Se=Date.now(),ne(),de.roll=0;var t=e.which||e.keycode;0>de.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),27==t?Me&&K():z(t,!0))}function C(){for(var e=0;10>e;e++)De[e]=!1}function O(e){var t=e.which||e.keycode;0>de.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),z(t,!1))}function z(e,t){var o=!1;109===e||189===e||17===e||173===e?(De[0]!=t&&(o=!0),De[0]=t):107===e||187===e||16===e||61===e?(De[1]!=t&&(o=!0),De[1]=t):38===e?(De[2]!=t&&(o=!0),De[2]=t):87===e?(De[6]!=t&&(o=!0),De[6]=t):40===e?(De[3]!=t&&(o=!0),De[3]=t):83===e?(De[7]!=t&&(o=!0),De[7]=t):37===e?(De[4]!=t&&(o=!0),De[4]=t):65===e?(De[8]!=t&&(o=!0),De[8]=t):39===e?(De[5]!=t&&(o=!0),De[5]=t):68===e?(De[9]!=t&&(o=!0),De[9]=t):void 0;o&&t&&(ue='undefined'!=typeof performance&&performance.now()?performance.now():Date.now(),T())}function R(){if(he){var e,t=!1,o=de.pitch,n=de.yaw,a=de.hfov;e='undefined'!=typeof performance&&performance.now()?performance.now():Date.now(),void 0===ue&&(ue=e);var i=(e-ue)*de.hfov/1700;i=be(i,1),De[0]&&!0===de.keyboardZoom&&(Q(de.hfov+(.8*We.hfov+.5)*i),t=!0),De[1]&&!0===de.keyboardZoom&&(Q(de.hfov+(.8*We.hfov-.2)*i),t=!0),(De[2]||De[6])&&(de.pitch+=(.8*We.pitch+.2)*i,t=!0),(De[3]||De[7])&&(de.pitch+=(.8*We.pitch-.2)*i,t=!0),(De[4]||De[8])&&(de.yaw+=(.8*We.yaw-.2)*i,t=!0),(De[5]||De[9])&&(de.yaw+=(.8*We.yaw+.2)*i,t=!0),t&&(Se=Date.now());Date.now()-Se;if(de.autoRotate){if(.001<e-ue){var s=(e-ue)/1e3,l=(We.yaw/s*i-.2*de.autoRotate)*s;l=(0<-de.autoRotate?1:-1)*be(we(de.autoRotate*s),we(l)),de.yaw+=l}de.autoRotateStopDelay&&(de.autoRotateStopDelay-=e-ue,0>=de.autoRotateStopDelay&&(de.autoRotateStopDelay=!1,qe=de.autoRotate,de.autoRotate=0))}if(Ze.pitch&&(S('pitch'),o=de.pitch),Ze.yaw&&(S('yaw'),n=de.yaw),Ze.hfov&&(S('hfov'),a=de.hfov),0<i&&!de.autoRotate){var r=.85;De[4]||De[5]||De[8]||De[9]||Ze.yaw||(de.yaw+=We.yaw*i*r),De[2]||De[3]||De[6]||De[7]||Ze.pitch||(de.pitch+=We.pitch*i*r),De[0]||De[1]||Ze.hfov||Q(de.hfov+We.hfov*i*r)}if(ue=e,0<i){We.yaw=.8*We.yaw+.2*((de.yaw-n)/i),We.pitch=.8*We.pitch+.2*((de.pitch-o)/i),We.hfov=.8*We.hfov+.2*((de.hfov-a)/i);var d=de.autoRotate?we(de.autoRotate):5;We.yaw=be(d,ge(We.yaw,-d)),We.pitch=be(d,ge(We.pitch,-d)),We.hfov=be(d,ge(We.hfov,-d))}De[0]&&De[1]&&(We.hfov=0),(De[2]||De[6])&&(De[3]||De[7])&&(We.pitch=0),(De[4]||De[8])&&(De[5]||De[9])&&(We.yaw=0)}}function S(e){var o=Ze[e],t=be(1,ge((Date.now()-o.startTime)/1e3/(o.duration/1e3),0)),n=o.startPosition+de.animationTimingFunction(t)*(o.endPosition-o.startPosition);if(o.endPosition>o.startPosition&&n>=o.endPosition||o.endPosition<o.startPosition&&n<=o.endPosition||o.endPosition===o.startPosition){n=o.endPosition,We[e]=0;var a=Ze[e].callback,i=Ze[e].callbackArgs;delete Ze[e],'function'==typeof a&&a(i)}de[e]=n}function H(){_()}function T(){Be||(Be=!0,F())}function F(){if(I(),ve&&clearTimeout(ve),Re||!0===Ge)requestAnimationFrame(F);else if(De[0]||De[1]||De[2]||De[3]||De[4]||De[5]||De[6]||De[7]||De[8]||De[9]||de.autoRotate||Ze.pitch||Ze.yaw||Ze.hfov||.01<we(We.yaw)||.01<we(We.pitch)||.01<we(We.hfov))R(),0<=de.autoRotateInactivityDelay&&qe&&Date.now()-Se>de.autoRotateInactivityDelay&&!de.autoRotate&&(de.autoRotate=qe,ze.lookAt(fe,void 0,ye,3e3)),requestAnimationFrame(F);else if(ce&&(ce.isLoading()||!0===de.dynamic&&Ke))requestAnimationFrame(F);else{Be=!1,ue=void 0;var e=de.autoRotateInactivityDelay-(Date.now()-Se);0<e?ve=setTimeout(function(){de.autoRotate=qe,ze.lookAt(fe,void 0,ye,3e3),T()},e):0<=de.autoRotateInactivityDelay&&qe&&(de.autoRotate=qe,ze.lookAt(fe,void 0,ye,3e3),T())}}function I(){var e;if(he){180<de.yaw?de.yaw-=360:-180>de.yaw&&(de.yaw+=360),e=de.yaw;var t=0,o=0;if(de.avoidShowingBackground){var n=ce.getCanvas(),a=de.hfov/2,i=180*xe(Ce(a/180*Oe),n.width/n.height)/Oe,s=de.vaov>de.haov;s?o=i*(1-be(Le((de.pitch-a)/180*Oe),Le((de.pitch+a)/180*Oe))):t=a*(1-be(Le((de.pitch-i)/180*Oe),Le((de.pitch+i)/180*Oe)))}var l=de.maxYaw-de.minYaw,r=-180,d=180;360>l&&(r=de.minYaw+de.hfov/2+t,d=de.maxYaw-de.hfov/2-t,l<de.hfov&&(r=d=(r+d)/2),de.yaw=ge(r,be(d,de.yaw))),!1!==de.autoRotate&&e!=de.yaw&&ue!==void 0&&(de.autoRotate*=-1);var n=ce.getCanvas(),c=180*(2*Ee(Ce(.5*(de.hfov/180*Oe))/(n.width/n.height))/Oe),p=de.minPitch+c/2,h=de.maxPitch-c/2,m=de.maxPitch-de.minPitch;m<c&&(p=h=(p+h)/2),isNaN(p)&&(p=-90),isNaN(h)&&(h=90),de.pitch=ge(p,be(h,de.pitch)),ce.render(de.pitch*Oe/180,de.yaw*Oe/180,de.hfov*Oe/180,{roll:de.roll*Oe/180}),Z(),de.compass&&(st.style.transform='rotate('+(-de.yaw-de.northOffset)+'deg)',st.style.webkitTransform='rotate('+(-de.yaw-de.northOffset)+'deg)')}}function N(e,t,o,n){this.w=e,this.x=t,this.y=o,this.z=n}function D(e,t,o){var n=[t?t*Oe/180/2:0,o?o*Oe/180/2:0,e?e*Oe/180/2:0],a=[Le(n[0]),Le(n[1]),Le(n[2])],i=[ke(n[0]),ke(n[1]),ke(n[2])];return new N(a[0]*a[1]*a[2]-i[0]*i[1]*i[2],i[0]*a[1]*a[2]-a[0]*i[1]*i[2],a[0]*i[1]*a[2]+i[0]*a[1]*i[2],a[0]*a[1]*i[2]+i[0]*i[1]*a[2])}function M(e,o,n){var a=D(e,o,n);a=a.multiply(new N(0.7071067811865476,-0.7071067811865476,0,0));var i=t.orientation?-t.orientation*Oe/180/2:0;return a.multiply(new N(Le(i),0,-ke(i),0))}function A(t){var e=M(t.alpha,t.beta,t.gamma).toEulerAngles();'number'==typeof Ge&&10>Ge?Ge+=1:10===Ge?(Ue=180*(e[2]/Oe)+de.yaw,Ge=!0,requestAnimationFrame(F)):(de.pitch=180*(e[0]/Oe),de.roll=180*(-e[1]/Oe),de.yaw=180*(-e[2]/Oe)+Ue)}function Y(){try{var e={};de.horizonPitch!==void 0&&(e.horizonPitch=de.horizonPitch*Oe/180),de.horizonRoll!==void 0&&(e.horizonRoll=de.horizonRoll*Oe/180),de.backgroundColor!==void 0&&(e.backgroundColor=de.backgroundColor),ce.init(me,de.type,de.dynamic,de.haov*Oe/180,de.vaov*Oe/180,de.vOffset*Oe/180,W,e),!0!==de.dynamic&&(me=void 0)}catch(e){if('webgl error'==e.type||'no webgl'==e.type)d();else if('webgl size error'==e.type)d(de.strings.textureSizeError.replace('%s',e.width).replace('%s',e.maxWidth));else throw d(de.strings.unknownError),e}}function W(){if(de.sceneFadeDuration&&ce.fadeImg!==void 0){ce.fadeImg.style.opacity=0;var e=ce.fadeImg;delete ce.fadeImg,setTimeout(function(){$e.removeChild(e),re('scenechangefadedone')},de.sceneFadeDuration)}st.style.display=de.compass?'inline':'none',G(),tt.load.box.style.display='none',pe!==void 0&&($e.removeChild(pe),pe=void 0),he=!0,re('load'),T()}function B(t){t.pitch=+t.pitch||0,t.yaw=+t.yaw||0;var e=o.createElement('div');e.className='pnlm-hotspot-base',e.className+=t.cssClass?' '+t.cssClass:' pnlm-hotspot pnlm-sprite pnlm-'+ie(t.type);var n=o.createElement('span');t.text&&(n.innerHTML=ie(t.text));var i;if(t.video){var l=o.createElement('video'),r=t.video;de.basePath&&!s(r)&&(r=de.basePath+r),l.src=se(r),l.controls=!0,l.style.width=t.width+'px',$e.appendChild(e),n.appendChild(l)}else if(t.image){var r=t.image;de.basePath&&!s(r)&&(r=de.basePath+r),i=o.createElement('a'),i.href=se(t.URL?t.URL:r),i.target='_blank',n.appendChild(i);var d=o.createElement('img');d.src=se(r),d.style.width=t.width+'px',d.style.paddingTop='5px',$e.appendChild(e),i.appendChild(d),n.style.maxWidth='initial'}else t.URL?(i=o.createElement('a'),i.href=se(t.URL),i.target='_blank',$e.appendChild(i),e.className+=' pnlm-pointer',n.className+=' pnlm-pointer',i.appendChild(e)):(t.sceneId&&(e.onclick=e.ontouchend=function(){return e.clicked||(e.clicked=!0,oe(t.sceneId,t.targetPitch,t.targetYaw,t.targetHfov)),!1},e.className+=' pnlm-pointer',n.className+=' pnlm-pointer'),$e.appendChild(e));t.createTooltipFunc?t.createTooltipFunc(e,t.createTooltipArgs):(t.text||t.video||t.image)&&(e.classList.add('pnlm-tooltip'),e.appendChild(n),n.style.width=n.scrollWidth-20+'px',n.style.marginLeft=-(n.scrollWidth-e.offsetWidth)/2+'px',n.style.marginTop=-n.scrollHeight-12+'px'),t.clickHandlerFunc&&(e.addEventListener('click',function(o){t.clickHandlerFunc(o,t.clickHandlerArgs)},'false'),e.className+=' pnlm-pointer',n.className+=' pnlm-pointer'),t.div=e}function G(){_e||(de.hotSpots?(de.hotSpots=de.hotSpots.sort(function(e,t){return e.pitch<t.pitch}),de.hotSpots.forEach(B)):de.hotSpots=[],_e=!0,Z())}function U(){var e=de.hotSpots;if(_e=!1,delete de.hotSpots,e)for(var t,o=0;o<e.length;o++){for(t=e[o].div;t.parentNode!=$e;)t=t.parentNode;$e.removeChild(t),delete e[o].div}}function q(e){var t=ke(e.pitch*Oe/180),o=Le(e.pitch*Oe/180),n=ke(de.pitch*Oe/180),a=Le(de.pitch*Oe/180),i=Le((-e.yaw+de.yaw)*Oe/180),s=t*n+o*i*a;if(90>=e.yaw&&-90<e.yaw&&0>=s||(90<e.yaw||-90>=e.yaw)&&0>=s)e.div.style.visibility='hidden';else{var l=ke((-e.yaw+de.yaw)*Oe/180),r=Ce(de.hfov*Oe/360);e.div.style.visibility='visible';var d=ce.getCanvas(),c=d.clientWidth,p=d.clientHeight,h=[-c/r*l*o/s/2,-c/r*(t*a-o*i*n)/s/2],m=ke(de.roll*Oe/180),u=Le(de.roll*Oe/180);h=[h[0]*u-h[1]*m,h[0]*m+h[1]*u],h[0]+=(c-e.div.offsetWidth)/2,h[1]+=(p-e.div.offsetHeight)/2;var v='translate('+h[0]+'px, '+h[1]+'px) translateZ(9999px) rotate('+de.roll+'deg)';e.div.style.webkitTransform=v,e.div.style.MozTransform=v,e.div.style.transform=v}}function Z(){de.hotSpots.forEach(q)}function j(e){de={};var t,o,a=['haov','vaov','vOffset','northOffset','horizonPitch','horizonRoll'];for(t in Xe=[],Ve)Ve.hasOwnProperty(t)&&(de[t]=Ve[t]);for(t in n.default)if(n.default.hasOwnProperty(t))if('strings'==t)for(o in n.default.strings)n.default.strings.hasOwnProperty(o)&&(de.strings[o]=ie(n.default.strings[o]));else de[t]=n.default[t],0<=a.indexOf(t)&&Xe.push(t);if(null!==e&&''!==e&&n.scenes&&n.scenes[e]){var i=n.scenes[e];for(t in i)if(i.hasOwnProperty(t))if('strings'==t)for(o in i.strings)i.strings.hasOwnProperty(o)&&(de.strings[o]=ie(i.strings[o]));else de[t]=i[t],0<=a.indexOf(t)&&Xe.push(t);de.scene=e}for(t in n)if(n.hasOwnProperty(t))if('strings'==t)for(o in n.strings)n.strings.hasOwnProperty(o)&&(de.strings[o]=ie(n.strings[o]));else de[t]=n[t],0<=a.indexOf(t)&&Xe.push(t)}function X(e){if(e=!!e&&e,e&&'preview'in de){var t=de.preview;de.basePath&&!s(t)&&(t=de.basePath+t),pe=o.createElement('div'),pe.className='pnlm-preview-img',pe.style.backgroundImage='url(\''+le(t)+'\')',$e.appendChild(pe)}var n=de.title,a=de.author;for(var l in e&&('previewTitle'in de&&(de.title=de.previewTitle),'previewAuthor'in de&&(de.author=de.previewAuthor)),de.hasOwnProperty('title')||(tt.title.innerHTML=''),de.hasOwnProperty('author')||(tt.author.innerHTML=''),de.hasOwnProperty('title')||de.hasOwnProperty('author')||(tt.container.style.display='none'),nt.load.innerHTML='<p>'+de.strings.loadButtonLabel+'</p>',tt.load.boxp.innerHTML=de.strings.loadingLabel,de)if(de.hasOwnProperty(l))switch(l){case'title':tt.title.innerHTML=ie(de[l]),tt.container.style.display='inline';break;case'author':tt.author.innerHTML=de.strings.bylineLabel.replace('%s',ie(de[l])),tt.container.style.display='inline';break;case'fallback':var r=o.createElement('a');r.href=se(de[l]),r.target='_blank',r.textContent='Click here to view this panorama in an alternative viewer.';var d=o.createElement('p');d.textContent='Your browser does not support WebGL.',d.appendChild(o.createElement('br')),d.appendChild(r),tt.errorMsg.innerHTML='',tt.errorMsg.appendChild(d);break;case'hfov':Q(+de[l]);break;case'autoLoad':!0===de[l]&&void 0===ce&&(tt.load.box.style.display='inline',nt.load.style.display='none',i());break;case'showZoomCtrl':nt.zoom.style.display=de[l]&&!1!=de.showControls?'block':'none';break;case'showFullscreenCtrl':nt.fullscreen.style.display=de[l]&&!1!=de.showControls&&('fullscreen'in o||'mozFullScreen'in o||'webkitIsFullScreen'in o||'msFullscreenElement'in o)?'block':'none';break;case'hotSpotDebug':ot.style.display=de[l]?'block':'none';break;case'showControls':de[l]||(nt.orientation.style.display='none',nt.zoom.style.display='none',nt.fullscreen.style.display='none');break;case'orientationOnByDefault':de[l]&&(void 0===at?it=!0:!0===at&&ae());}e&&(n?de.title=n:delete de.title,a?de.author=a:delete de.author)}function K(){if(he&&!Ae)if(!Me)try{e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullScreen()}catch(e){}else o.exitFullscreen?o.exitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.webkitCancelFullScreen?o.webkitCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen()}function _(){o.fullscreen||o.mozFullScreen||o.webkitIsFullScreen||o.msFullscreenElement?(nt.fullscreen.classList.add('pnlm-fullscreen-toggle-button-active'),Me=!0):(nt.fullscreen.classList.remove('pnlm-fullscreen-toggle-button-active'),Me=!1),ce.resize(),Q(de.hfov),T()}function V(){he&&(Q(de.hfov-5),T())}function J(){he&&(Q(de.hfov+5),T())}function $(e){var t=de.minHfov;if('multires'==de.type&&ce&&(t=be(t,ce.getCanvas().width/(.9*(de.multiRes.cubeResolution/90)))),t>de.maxHfov)return console.log('HFOV bounds do not make sense (minHfov > maxHfov).'),de.hfov;var o=de.hfov;if(o=e<t?t:e>de.maxHfov?de.maxHfov:e,de.avoidShowingBackground&&ce){var n=ce.getCanvas();o=be(o,360*Ee(Ce((de.maxPitch-de.minPitch)/360*Oe)/n.height*n.width)/Oe)}return o}function Q(e){de.hfov=$(e)}function ee(){Ze={},qe=de.autoRotate?de.autoRotate:qe,de.autoRotate=!1}function te(){c(),he=!1,nt.load.style.display='none',tt.load.box.style.display='inline',i()}function oe(e,t,o,a,i){he=!1,Ze={};var s,l,r,d;if(de.sceneFadeDuration&&!i){var c=ce.render(de.pitch*Oe/180,de.yaw*Oe/180,de.hfov*Oe/180,{returnImage:!0});if(void 0!==c)return s=new Image,s.className='pnlm-fade-img',s.style.transition='opacity '+de.sceneFadeDuration/1e3+'s',s.style.width='100%',s.style.height='100%',s.onload=function(){oe(e,t,o,a,!0)},s.src=c,$e.appendChild(s),void(ce.fadeImg=s)}l='same'===t?de.pitch:t,r='same'===o?de.yaw:'sameAzimuth'===o?de.yaw+(de.northOffset||0)-(n.scenes[e].northOffset||0):o,d='same'===a?de.hfov:a,U(),j(e),We.yaw=We.pitch=We.hfov=0,X(),l!==void 0&&(de.pitch=l),r!==void 0&&(de.yaw=r),d!==void 0&&(de.hfov=d),re('scenechange',e),te()}function ne(){t.removeEventListener('deviceorientation',A),nt.orientation.classList.remove('pnlm-orientation-button-active'),Ge=!1}function ae(){Ge=1,t.addEventListener('deviceorientation',A),nt.orientation.classList.add('pnlm-orientation-button-active')}function ie(e){return n.escapeHTML?(e+'').split(/&/g).join('&amp;').split('"').join('&quot;').split('\'').join('&#39;').split('<').join('&lt;').split('>').join('&gt;').split('/').join('&#x2f;').split('\n').join('<br>'):(e+'').split('\n').join('<br>')}function se(e){return 0===e.trim().toLowerCase().indexOf('javascript:')?'about:blank':e}function le(e){return se(e).replace(/"/g,'%22').replace(/'/g,'%27')}function re(e){if(e in je)for(var t=je[e].length;0<t;t--)je[e][je[e].length-t].apply(null,[].slice.call(arguments,1))}var de,ce,pe,he,me,ue,ve,ye,fe,ge=Math.max,we=Math.abs,be=Math.min,xe=Math.atan2,Ee=Math.atan,Pe=Math.sqrt,Le=Math.cos,ke=Math.sin,Ce=Math.tan,Oe=Math.PI,ze=this,Re=!1,Se=Date.now(),He=0,Te=0,Fe=-1,Ie=0,Ne=0,De=Array(10),Me=!1,Ae=!1,Ye=!1,We={yaw:0,pitch:0,hfov:0},Be=!1,Ge=!1,Ue=0,qe=0,Ze={},je={},Xe=[],Ke=!1,_e=!1,Ve={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:void 0,maxPitch:void 0,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:void 0,type:'equirectangular',northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(e){return .5>e?2*e*e:-1+(4-2*e)*e},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:'anonymous',touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189]};Ve.strings={loadButtonLabel:'Click to<br>Load<br>Panorama',loadingLabel:'Loading...',bylineLabel:'by %s',noPanoramaError:'No panorama image was specified.',fileAccessError:'The file %s could not be accessed.',malformedURLError:'There is something wrong with the panorama URL.',iOS8WebGLError:'Due to iOS 8\'s broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).',genericWebGLError:'Your browser does not have the necessary WebGL support to display this panorama.',textureSizeError:'This panorama is too big for your device! It\'s %spx wide, but your device only supports images up to %spx wide. Try another device. (If you\'re the author, try scaling down the image.)',unknownError:'Unknown error. Check developer console.'},e='string'==typeof e?o.getElementById(e):e,e.classList.add('pnlm-container'),e.tabIndex=0;var Je=o.createElement('div');Je.className='pnlm-ui',e.appendChild(Je);var $e=o.createElement('div');$e.className='pnlm-render-container',e.appendChild($e);var Qe=o.createElement('div');Qe.className='pnlm-dragfix',Je.appendChild(Qe);var et=o.createElement('span');et.className='pnlm-about-msg',et.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',Je.appendChild(et),Qe.addEventListener('contextmenu',p);var tt={},ot=o.createElement('div');ot.className='pnlm-sprite pnlm-hot-spot-debug-indicator',Je.appendChild(ot),tt.container=o.createElement('div'),tt.container.className='pnlm-panorama-info',tt.title=o.createElement('div'),tt.title.className='pnlm-title-box',tt.container.appendChild(tt.title),tt.author=o.createElement('div'),tt.author.className='pnlm-author-box',tt.container.appendChild(tt.author),Je.appendChild(tt.container),tt.load={},tt.load.box=o.createElement('div'),tt.load.box.className='pnlm-load-box',tt.load.boxp=o.createElement('p'),tt.load.box.appendChild(tt.load.boxp),tt.load.lbox=o.createElement('div'),tt.load.lbox.className='pnlm-lbox',tt.load.lbox.innerHTML='<div class="pnlm-loading"></div>',tt.load.box.appendChild(tt.load.lbox),tt.load.lbar=o.createElement('div'),tt.load.lbar.className='pnlm-lbar',tt.load.lbarFill=o.createElement('div'),tt.load.lbarFill.className='pnlm-lbar-fill',tt.load.lbar.appendChild(tt.load.lbarFill),tt.load.box.appendChild(tt.load.lbar),tt.load.msg=o.createElement('p'),tt.load.msg.className='pnlm-lmsg',tt.load.box.appendChild(tt.load.msg),Je.appendChild(tt.load.box),tt.errorMsg=o.createElement('div'),tt.errorMsg.className='pnlm-error-msg pnlm-info-box',Je.appendChild(tt.errorMsg);var nt={};nt.container=o.createElement('div'),nt.container.className='pnlm-controls-container',Je.appendChild(nt.container),nt.load=o.createElement('div'),nt.load.className='pnlm-load-button',nt.load.addEventListener('click',function(){X(),te()}),Je.appendChild(nt.load),nt.zoom=o.createElement('div'),nt.zoom.className='pnlm-zoom-controls pnlm-controls',nt.zoomIn=o.createElement('div'),nt.zoomIn.className='pnlm-zoom-in pnlm-sprite pnlm-control',nt.zoomIn.addEventListener('click',V),nt.zoom.appendChild(nt.zoomIn),nt.zoomOut=o.createElement('div'),nt.zoomOut.className='pnlm-zoom-out pnlm-sprite pnlm-control',nt.zoomOut.addEventListener('click',J),nt.zoom.appendChild(nt.zoomOut),nt.container.appendChild(nt.zoom),nt.fullscreen=o.createElement('div'),nt.fullscreen.addEventListener('click',K),nt.fullscreen.className='pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control',(o.fullscreenEnabled||o.mozFullScreenEnabled||o.webkitFullscreenEnabled||o.msFullscreenEnabled)&&nt.container.appendChild(nt.fullscreen),nt.orientation=o.createElement('div'),nt.orientation.addEventListener('click',function(){Ge?ne():ae()}),nt.orientation.addEventListener('mousedown',function(t){t.stopPropagation()}),nt.orientation.addEventListener('touchstart',function(t){t.stopPropagation()}),nt.orientation.addEventListener('pointerdown',function(t){t.stopPropagation()}),nt.orientation.className='pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control';var at,it=!1;t.DeviceOrientationEvent?t.addEventListener('deviceorientation',a):at=!1;var st=o.createElement('div');st.className='pnlm-compass pnlm-controls pnlm-control',Je.appendChild(st),n.firstScene?j(n.firstScene):n.default&&n.default.firstScene?j(n.default.firstScene):j(null),X(!0);var lt=[],rt=[];N.prototype.multiply=function(e){return new N(this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z,this.x*e.w+this.w*e.x+this.y*e.z-this.z*e.y,this.y*e.w+this.w*e.y+this.z*e.x-this.x*e.z,this.z*e.w+this.w*e.z+this.x*e.y-this.y*e.x)},N.prototype.toEulerAngles=function(){var e=xe(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),t=Math.asin(2*(this.w*this.y-this.z*this.x)),o=xe(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[e,t,o]};this.isLoaded=function(){return!!he},this.getPitch=function(){return de.pitch},this.setPitch=function(e,t,o,n){return t=null==t?1e3:+t,t?Ze.pitch={startTime:Date.now(),startPosition:de.pitch,endPosition:e,duration:t,callback:o,callbackArgs:n}:de.pitch=e,T(),this},this.getPitchBounds=function(){return[de.minPitch,de.maxPitch]},this.setPitchBounds=function(e){return de.minPitch=ge(-90,be(e[0],90)),de.maxPitch=ge(-90,be(e[1],90)),this},this.getYaw=function(){return de.yaw},this.setYaw=function(e,t,o,n){return t=null==t?1e3:+t,e=(e+180)%360-180,t?(180<de.yaw-e?e+=360:180<e-de.yaw&&(e-=360),Ze.yaw={startTime:Date.now(),startPosition:de.yaw,endPosition:e,duration:t,callback:o,callbackArgs:n}):de.yaw=e,T(),this},this.getYawBounds=function(){return[de.minYaw,de.maxYaw]},this.setYawBounds=function(e){return de.minYaw=ge(-180,be(e[0],180)),de.maxYaw=ge(-180,be(e[1],180)),this},this.getHfov=function(){return de.hfov},this.setHfov=function(e,t,o,n){return t=null==t?1e3:+t,t?Ze.hfov={startTime:Date.now(),startPosition:de.hfov,endPosition:$(e),duration:t,callback:o,callbackArgs:n}:Q(e),T(),this},this.getHfovBounds=function(){return[de.minHfov,de.maxHfov]},this.setHfovBounds=function(e){return de.minHfov=ge(0,e[0]),de.maxHfov=ge(0,e[1]),this},this.lookAt=function(e,t,o,n,a,i){return n=null==n?1e3:+n,void 0!==e&&(this.setPitch(e,n,a,i),a=void 0),void 0!==t&&(this.setYaw(t,n,a,i),a=void 0),void 0!==o&&this.setHfov(o,n,a,i),this},this.getNorthOffset=function(){return de.northOffset},this.setNorthOffset=function(e){return de.northOffset=be(360,ge(0,e)),T(),this},this.getHorizonRoll=function(){return de.horizonRoll},this.setHorizonRoll=function(e){return de.horizonRoll=be(90,ge(-90,e)),ce.setPose(de.horizonPitch*Oe/180,de.horizonRoll*Oe/180),T(),this},this.getHorizonPitch=function(){return de.horizonPitch},this.setHorizonPitch=function(e){return de.horizonPitch=be(90,ge(-90,e)),ce.setPose(de.horizonPitch*Oe/180,de.horizonRoll*Oe/180),T(),this},this.startAutoRotate=function(e){return e=e||qe||1,de.autoRotate=e,ze.lookAt(fe,void 0,ye,3e3),T(),this},this.stopAutoRotate=function(){return qe=de.autoRotate?de.autoRotate:qe,de.autoRotate=!1,de.autoRotateInactivityDelay=-1,this},this.getRenderer=function(){return ce},this.setUpdate=function(e){return Ke=!0===e,void 0===ce?l():T(),this},this.mouseEventToCoords=function(e){return v(e)},this.loadScene=function(e,t,o,n){return!1!==he&&oe(e,t,o,n),this},this.getScene=function(){return de.scene},this.addScene=function(e,t){return n.scenes[e]=t,this},this.removeScene=function(e){return!!(de.scene!==e&&n.scenes.hasOwnProperty(e))&&(delete n.scenes[e],!0)},this.toggleFullscreen=function(){return K(),this},this.getConfig=function(){return de},this.getContainer=function(){return e},this.addHotSpot=function(e,t){if(void 0===t&&void 0===de.scene)de.hotSpots.push(e);else{var o=void 0===t?de.scene:t;if(n.scenes.hasOwnProperty(o))n.scenes[o].hasOwnProperty('hotSpots')||(n.scenes[o].hotSpots=[],o==de.scene&&(de.hotSpots=n.scenes[o].hotSpots)),n.scenes[o].hotSpots.push(e);else throw'Invalid scene ID!'}return(void 0===t||de.scene==t)&&(B(e),he&&q(e)),this},this.removeHotSpot=function(e,t){if(t===void 0||de.scene==t){if(!de.hotSpots)return!1;for(var o=0;o<de.hotSpots.length;o++)if(de.hotSpots[o].hasOwnProperty('id')&&de.hotSpots[o].id===e){for(var a=de.hotSpots[o].div;a.parentNode!=$e;)a=a.parentNode;return $e.removeChild(a),delete de.hotSpots[o].div,de.hotSpots.splice(o,1),!0}}else if(n.scenes.hasOwnProperty(t)){if(!n.scenes[t].hasOwnProperty('hotSpots'))return!1;for(var o=0;o<n.scenes[t].hotSpots.length;o++)if(n.scenes[t].hotSpots[o].hasOwnProperty('id')&&n.scenes[t].hotSpots[o].id===e)return n.scenes[t].hotSpots.splice(o,1),!0}else return!1},this.resize=function(){H()},this.isLoaded=function(){return he},this.isOrientationSupported=function(){return at||!1},this.stopOrientation=function(){ne()},this.startOrientation=function(){at&&ae()},this.isOrientationActive=function(){return!!Ge},this.on=function(e,t){return je[e]=je[e]||[],je[e].push(t),this},this.off=function(e,t){if(!e)return je={},this;if(t){var o=je[e].indexOf(t);0<=o&&je[e].splice(o,1),0==je[e].length&&delete je[e]}else delete je[e];return this},this.destroy=function(){ce&&ce.destroy(),Ye&&(Qe.removeEventListener('mousedown',m,!1),Qe.removeEventListener('dblclick',u,!1),o.removeEventListener('mousemove',y,!1),o.removeEventListener('mouseup',f,!1),e.removeEventListener('mousewheel',L,!1),e.removeEventListener('DOMMouseScroll',L,!1),e.removeEventListener('mozfullscreenchange',_,!1),e.removeEventListener('webkitfullscreenchange',_,!1),e.removeEventListener('msfullscreenchange',_,!1),e.removeEventListener('fullscreenchange',_,!1),t.removeEventListener('resize',H,!1),t.removeEventListener('orientationchange',H,!1),e.removeEventListener('keydown',k,!1),e.removeEventListener('keyup',O,!1),e.removeEventListener('blur',C,!1),o.removeEventListener('mouseleave',f,!1),Qe.removeEventListener('touchstart',g,!1),Qe.removeEventListener('touchmove',w,!1),Qe.removeEventListener('touchend',b,!1),Qe.removeEventListener('pointerdown',x,!1),Qe.removeEventListener('pointermove',E,!1),Qe.removeEventListener('pointerup',P,!1),Qe.removeEventListener('pointerleave',P,!1)),e.innerHTML='',e.classList.remove('pnlm-container'),Je.classList.remove('pnlm-grab'),Je.classList.remove('pnlm-grabbing')}}return{viewer:function(t,o){return new e(t,o)}}}(window,document);